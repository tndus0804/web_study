<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
	<style>
		h1 {
			text-align: center;
			font-size: 60px ;
			margin: 40px auto;
		}

		table {
			border: 1px solid black; 
			margin: 0 auto; /* 영역의 중앙정렬은, 왼, 오 margin 설정 */
		}
		th {
			width: 200px;
			height: 60px;
		}
		td {
			width: 400px;
			height: 60px;
			text-align: center;
		}

		input[type='text'], input[type='password'] {
			width: 300px;
			height: 50px;
			font-size: large;
		}
		.lightpink {
			background-color: lightpink;
		}
		.lightblue {
			background-color: lightblue;
		}
		.btn {
			width: 100px;
			height: 30px;
			background-color: cadetblue;
			border-color: blue;
		}
	</style>
	<script>
		/*
			== Javascript 순서 ==
			1. id 입력박스 엘리먼트를 자바스크립트 변수에 저장
			   pw 입력박스 엘리먼트를 자바스크립트 변수에 저장
			   pw 확인 입력박스 엘리먼트를 자바스크립트 변수에 저장
			2. id 입력박스 & pw 확인 입력박스의 엘리먼트를 저장한 변수를 통해
			   keyup 이벤트 발생시 콜백함수를 호출 할 수 있는 addEventListener 생성
			3. id 입력박스 & pw 확인 입력박스의 콜백함수에 각각
			    a.
				  id 입력박스의 value 속성을 불러 몇 글자를 입력중인지 조건문으로 체크
				  8자 이상이라면 해당 엘리먼트의 backgroundColor를 파란색으로
				  8자 미만이라면 해당 엘리먼트의 backgroundColor를 빨간색으로
				b.
				  pw입력박스의 value 값과 pw 확인 입력박스의 value 값이 일치하는지 비교
				  일치한다면 해당 엘리먼트의 backgroundColor를 빨간색으로
			4. 텍스트 및 입력 태그들을 포함하는 form 태그의 onsubmit 속성을 통해 전송이벤트 발생시 호출하는 함수 생성
			5. 해당 함수 안에서
				a. id 입력값이 8자 미만이면 alert 를 통해 문구를 출력하고 함수 종료
				b. pw 값과 pw 확인 값에 아무것도 입력하지 않았거나 일치하지 않는다면 alert를 통해 문구를출력하고 함수 종료
				c. a,b에 해당하지 않으면 폼 데이터 submit
		
		*/
		let isIdOk = false;
		let isPwOk = false;
		window.onload = function() {
			let userid = document.querySelector('#userid');
			let userpw = document.querySelector('#userpw');
			let checkpw = document.querySelector('#checkpw');

			// 아이디 이벤트
			userid.addEventListener('keyup', function() {
				// if(event.nativeEvent.isComposing) return;
				console.log(1, this.value.length);
				if(this.value.length < 8) {
					if(userid.classList.contains('lightblue')) 
					userid.classList.remove('lightblue');
					userid.classList.add('lightpink');
					isIdOk = false;
				} else {
					if(userid.classList.contains('lightpink')) 
					userid.classList.remove('lightpink');
					userid.classList.add('lightblue');
					isIdOk = true;
				}

			})
			// 비밀번호 이벤트
			userpw.addEventListener('keyup', function() {
				if(userpw.value.length < 1 || checkpw.value.length < 1) {
					// userpw.style.backgroundColor = 'white';
					// checkpw.style.backgroundColor = 'white';
					setColor(userpw, 'white');
					setColor(checkpw, 'white');
					return;
				}
				if (userpw.value == checkpw.value) {
					console.log('비번 같아요');
					isPwOk = true;
					userpw.style.backgroundColor = 'lightblue';
					checkpw.style.backgroundColor = 'lightblue';
				} else {
					console.log('비번 다름');
					isPwOk = false;
					userpw.style.backgroundColor = 'lightpink';
					checkpw.style.backgroundColor = 'lightpink';

				}
			})

			
			// 비밀번호 확인 이벤트
			checkpw.addEventListener('keyup', function() {
				if(checkpw.value.length < 1 || userpw.value.length < 1) {
					userpw.style.backgroundColor = 'white';
					checkpw.style.backgroundColor = 'white';
					return;
				}
				if (checkpw.value == userpw.value) {
					console.log('비번 같아요');
					isPwOk = true;
					userpw.style.backgroundColor = 'lightblue';
					checkpw.style.backgroundColor = 'lightblue';
				} else {
					console.log('비번 다름');
					isPwOk = false;
					userpw.style.backgroundColor = 'lightpink';
					checkpw.style.backgroundColor = 'lightpink';
					
				}
			})
		}

		function setColor(object,color) {
			object.style.backgroundColor = color;
		}
		
		function submitFunc(event) {
			let userid = document.querySelector('#userpw')
			let userpw = document.querySelector('#userpw')
			let checkpw = document.querySelector('#checkpw')
			if(userid.value.length < 8) {
				alert('ID는 8자 이상으로 해라!!');
				return false;
			}
			
			if(userpw.value == null || checkpw.value == null
				|| userpw.value == '' || checkpw.value == ''
				|| userpw.value != checkpw.value
			) {
				alert('비밀번호를 입력하지 않ㅓ나 틀렸습니다.')
				return false;
			}
			if (isIdOk && !isPwOk) {
				event.preventDefault();
				alert('비밀번호를 체크해주세요')
				console.log('비번 체크');
				return false;
			}
			if (!isIdOk && isPwOk) {
				event.preventDefault()
				alert('아이디를 체크해주세요')
				console.log('아이디 체크');
				return false;
			}
			if (!isIdOk && !isPwOk) {
				event.preventDefault()
				alert('아이디와 비밀번호를 체크해주세요')
				console.log('아이디와 비밀번호 체크');
				return false;
			}

			alert('성공');
			console.log('성공');
			return true; // 폼 제출을 허용
		}
	</script>
</head>
<body>
	<!-- 아이디 -> 8글자 미만(빨간 배경), 8글자 이상(초록 배경) -->
	<!-- 비밀번호 -->
	<!-- 비밀번호 확인 -> 위의 비밀번호와 다르면(빨간 배경) -> 확인 눌렀을때(비밀번호가 달라요) -->
	<!-- 확인 버튼 -> 8글자 안되면 -> alert('8글자 이상 입력해주세요') -->
	<h1>회원 가입</h1>
	<form action="" method="get" onsubmit="return submitFunc(event)">
		<table>
			<tr>
				<th><label for="id">아이디</label></th>
				<td><input type="text" id="userid"><br></td>
			</tr>
			<tr>
				<th><label for="userpw">비밀번호</label></th>
				<td><input type="password" id="userpw"><br></td>
			</tr>
			<tr>
				<th><label for="checkpw">비밀번호 확인</label></th>
				<td><input type="password" id="checkpw"></td>
			</tr>
			<tr>
				<th colspan="2">
					<input type="submit" value="가입" id="submit" class="btn">
					<input type="reset" value="취소" id="cancel" class="btn">
				</th>
			</tr>
		</table>
	</form>
</body>
</html>